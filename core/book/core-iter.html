<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>iter - The Cairo Core Library Docs</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">The Cairo Core Library Docs</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="iter"><a class="header" href="#iter">iter</a></h1>
<p>Composable external iteration.If you've found yourself with a collection of some kind, and needed to perform an operation on the elements of said collection, you'll quickly run into 'iterators'. Iterators are heavily used in idiomatic code, so it's worth becoming familiar with them.Before explaining more, let's talk about how this module is structured:  # OrganizationThis module is largely organized by type:<a href="Traits">Traits</a> are the core portion: these traits define what kind of iterators exist and what you can do with them. The methods of these traits are worth putting some extra study time into. * <a href="Functions">Functions</a> provide some helpful ways to create some basic iterators. * <a href="Structs">Structs</a> are often the return types of the various methods on this module's traits. You'll usually want to look at the method that creates the <code>struct</code>, rather than the <code>struct</code> itself. For more detail about why, see '<a href="#implementing-iterator">Implementing Iterator</a>'.<a href="Traits">Traits</a>: #traits <a href="Functions">Functions</a>: #functions <a href="Structs">Structs</a>: #structsThat's it! Let's dig into iterators.  # IteratorThe heart and soul of this module is the <a href="./core-iter-traits-iterator-Iterator.html"><code>Iterator</code></a> trait. The core of <a href="./core-iter-traits-iterator-Iterator.html"><code>Iterator</code></a> looks like this:</p>
<pre><code class="language-cairo">trait Iterator {
    type Item;
    fn next(ref self) -&gt; Option&lt;Self::Item&gt;;
}
</code></pre>
<p>An iterator has a method, <a href="%60next%60"><code>next</code></a>, which when called, returns an <a href="./core-option-Option.html">Option</a><Item>. Calling <a href="%60next%60"><code>next</code></a> will return <a href="%60Some(Item)%60"><code>Some(Item)</code></a> as long as there are elements, and once they've all been exhausted, will return <code>None</code> to indicate that iteration is finished.<a href="./core-iter-traits-iterator-Iterator.html"><code>Iterator</code></a>'s full definition includes a number of other methods as well, but they are default methods, built on top of <a href="%60next%60"><code>next</code></a>, and so you get them for free.Iterators are also composable, and it's common to chain them together to do more complex forms of processing. See the <a href="#adapters">Adapters</a> section below for more details.<a href="%60Some(Item)%60"><code>Some(Item)</code></a>: Some <a href="%60next%60"><code>next</code></a>: Iterator::next  # Forms of iterationThere is currently only one common method which can create iterators from a collection:<code>into_iter()</code>, which iterates over <code>T</code>.  # Implementing IteratorCreating an iterator of your own involves two steps: creating a <code>struct</code> to hold the iterator's state, and then implementing <a href="./core-iter-traits-iterator-Iterator.html"><code>Iterator</code></a> for that <code>struct</code>. This is why there are so many <code>struct</code>s in this module: there is one for each iterator and iterator adapter.Let's make an iterator named <code>Counter</code> which counts from <code>1</code> to <code>5</code>:</p>
<pre><code class="language-cairo">// First, the struct:

/// An iterator which counts from one to five
<span class="boring">[derive(Drop)]
</span>struct Counter {
    count: usize,
}

// we want our count to start at one, so let's add a new() method to help.
// This isn't strictly necessary, but is convenient. Note that we start
// `count` at zero, we'll see why in `next()`'s implementation below.
<span class="boring">[generate_trait]
</span>impl CounterImpl of CounterTrait {
    fn new() -&gt; Counter {
        Counter { count: 0 }
    }
}

// Then, we implement `Iterator` for our `Counter`:

impl CounterIter of core::iter::Iterator&lt;Counter&gt; {
    // we will be counting with usize
    type Item = usize;

    // next() is the only required method
    fn next(ref self: Counter) -&gt; Option&lt;Self::Item&gt; {
        // Increment our count. This is why we started at zero.
        self.count += 1;

        // Check to see if we've finished counting or not.
        if self.count &lt; 6 {
            Some(self.count)
        } else {
            None
        }
    }
}

// And now we can use it!

let mut counter = CounterTrait::new();

assert!(counter.next() == Some(1));
assert!(counter.next() == Some(2));
assert!(counter.next() == Some(3));
assert!(counter.next() == Some(4));
assert!(counter.next() == Some(5));
assert!(counter.next() == None);
</code></pre>
<p>Calling <a href="%60next%60"><code>next</code></a> this way gets repetitive. Cairo has a construct which can call <a href="%60next%60"><code>next</code></a> on your iterator, until it reaches <code>None</code>. Let's go over that next.  # <code>for</code> loops and <code>IntoIterator</code>Cairo's <code>for</code> loop syntax is actually sugar for iterators. Here's a basic example of <code>for</code>:</p>
<pre><code class="language-cairo">let values = array![1, 2, 3, 4, 5];

for x in values {
    println!("{x}");
}
</code></pre>
<p>This will print the numbers one through five, each on their own line. But you'll notice something here: we never called anything on our array to produce an iterator. What gives?There's a trait in the core library for converting something into an iterator: <a href="./core-iter-traits-collect-IntoIterator.html"><code>IntoIterator</code></a>. This trait has one method, <a href="%60into_iter%60"><code>into_iter</code></a>, which converts the thing implementing <a href="./core-iter-traits-collect-IntoIterator.html"><code>IntoIterator</code></a> into an iterator. Let's take a look at that <code>for</code> loop again, and what the compiler converts it into:</p>
<pre><code class="language-cairo">let values = array![1, 2, 3, 4, 5];

for x in values {
    println!("{x}");
}
</code></pre>
<p>Cairo de-sugars this into:</p>
<pre><code class="language-cairo">let values = array![1, 2, 3, 4, 5];
{
    let mut iter = IntoIterator::into_iter(values);
    let result = loop {
            let mut next = 0;
            match iter.next() {
                Some(val) =&gt; next = val,
                None =&gt; {
                    break;
                },
            };
            let x = next;
            let () = { println!("{x}"); };
        };
    result
}
</code></pre>
<p>First, we call <code>into_iter()</code> on the value. Then, we match on the iterator that returns, calling <a href="%60next%60"><code>next</code></a> over and over until we see a <code>None</code>. At that point, we <code>break</code> out of the loop, and we're done iterating.There's one more subtle bit here: the core library contains an interesting implementation of <a href="./core-iter-traits-collect-IntoIterator.html"><code>IntoIterator</code></a>:</p>
<pre><code class="language-ignore (only-for-syntax-highlight)">impl IteratorIntoIterator&lt;T, +Iterator&lt;T&gt;&gt; of IntoIterator&lt;T&gt;
</code></pre>
<p>In other words, all <a href="./core-iter-traits-iterator-Iterator.html"><code>Iterator</code></a>s implement <a href="./core-iter-traits-collect-IntoIterator.html"><code>IntoIterator</code></a>, by just returning themselves. This means two things:If you're writing an <a href="./core-iter-traits-iterator-Iterator.html"><code>Iterator</code></a>, you can use it with a <code>for</code> loop. 2. If you're creating a collection, implementing <a href="./core-iter-traits-collect-IntoIterator.html"><code>IntoIterator</code></a> for it will allow your collection to be used with the <code>for</code> loop.  # AdaptersFunctions which take an <a href="./core-iter-traits-iterator-Iterator.html"><code>Iterator</code></a> and return another <a href="./core-iter-traits-iterator-Iterator.html"><code>Iterator</code></a> are often called 'iterator adapters', as they're a form of the 'adapter pattern'.Common iterators adapters include <a href="%60map%60"><code>map</code></a>, <a href="%60enumerate%60"><code>enumerate</code></a> and <a href="%60zip%60"><code>zip</code></a>.<a href="%60map%60"><code>map</code></a>: Iterator::map <a href="%60enumerate%60"><code>enumerate</code></a>: Iterator::enumerate <a href="%60zip%60"><code>zip</code></a>: Iterator::zip  # LazinessIterators (and iterator <a href="#adapters">adapters</a>) are lazy. This means that just creating an iterator doesn't do a whole lot. Nothing really happens until you call <a href="%60next%60"><code>next</code></a>. This is sometimes a source of confusion when creating an iterator solely for its side effects. For example, the <a href="%60map%60"><code>map</code></a> method calls a closure on each element it iterates over:</p>
<pre><code class="language-cairo">let v = array![1, 2, 3, 4, 5];
let _ = v.into_iter().map(|x| println!("{x}"));
</code></pre>
<p>This will not print any values, as we only created an iterator, rather than using it. The compiler will warn us about this kind of behavior:</p>
<pre><code class="language-text">Unhandled `#[must_use]` type
</code></pre>
<p>Fully qualified path: <code>core::iter</code></p>
<h2 id="traits"><a class="header" href="#traits">Traits</a></h2>
<ul>
<li>
<p><a href="./core-iter-adapters-peekable-PeekableTrait.html">PeekableTrait</a></p>
</li>
<li>
<p><a href="./core-iter-traits-collect-Extend.html">Extend</a></p>
</li>
<li>
<p><a href="./core-iter-traits-collect-FromIterator.html">FromIterator</a></p>
</li>
<li>
<p><a href="./core-iter-traits-collect-IntoIterator.html">IntoIterator</a></p>
</li>
<li>
<p><a href="./core-iter-traits-iterator-Iterator.html">Iterator</a></p>
</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="core-string.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="core-metaprogramming.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="core-string.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="core-metaprogramming.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <!-- Livereload script (if served using the cli tool) -->
        <script>
            const wsProtocol = location.protocol === 'https:' ? 'wss:' : 'ws:';
            const wsAddress = wsProtocol + "//" + location.host + "/" + "__livereload";
            const socket = new WebSocket(wsAddress);
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
